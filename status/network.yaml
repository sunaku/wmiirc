status:
  network:
    params:
      ifconfig: /sbin/ifconfig
      interface: lo

    script: |
      def ifconfig
        `#{@ifconfig} #{@interface} 2>&1`
      end

    label: |
      ifconfig = self.ifconfig
      alive = ifconfig !~ /\A\S+ error/
      ip_addr = ifconfig[/inet (?:addr:)?([\d.]+)/, 1]

      if alive and ip_addr
        color = 'normal'
        rx_bytes, tx_bytes = ifconfig.scan(/\((\d+(?:\.\d+)? \w+)\)/)
        stats = [ip_addr, "\u2798", rx_bytes, "\u279A", tx_bytes]
      else
        color = 'error'
        stats = []
      end

      [color, @interface, stats]

    control:
      action:
        network_details: dialog ifconfig

      mouse_action:
        left_click: network_details
